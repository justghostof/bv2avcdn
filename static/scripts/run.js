var xmlhttp;xmlhttp=window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP");var pattern=/([Bb][Vv])(([0-9a-zA-Z])*)/,str=document.URL,yes=pattern.test(str);if(0==yes)window.alert("我觉得不太对");else{var bvid=pattern.exec(str)[0];xmlhttp.open("GET","https://api.bilibili.com/x/web-interface/view?bvid="+bvid,!0),xmlhttp.send(),xmlhttp.onreadystatechange=function(){if(4==xmlhttp.readyState&&200==xmlhttp.status){ret=xmlhttp.responseText;var t=JSON.parse(xmlhttp.responseText);window.alert("当前视频AV号:\nav"+t.data.aid)}}}